\documentclass{beamer}
\usepackage[utf8]{inputenc}

\usetheme{Madrid}
\usecolortheme{default}
\usepackage{amsmath,amssymb,amsfonts,amsthm}
\usepackage{txfonts}
\usepackage{tkz-euclide}
\usepackage{listings}
\usepackage{adjustbox}
\usepackage{array}
\usepackage{tabularx}
\usepackage{gvv}
\usepackage{lmodern}
\usepackage{circuitikz}
\usepackage{tikz}
\usepackage{graphicx}

\setbeamertemplate{page number in head/foot}[totalframenumber]

\usepackage{tcolorbox}
\tcbuselibrary{minted,breakable,xparse,skins}



\definecolor{bg}{gray}{0.95}
\DeclareTCBListing{mintedbox}{O{}m!O{}}{%
	breakable=true,
	listing engine=minted,
	listing only,
	minted language=#2,
	minted style=default,
	minted options={%
		linenos,
		gobble=0,
		breaklines=true,
		breakafter=,,
		fontsize=\small,
		numbersep=8pt,
		#1},
	boxsep=0pt,
	left skip=0pt,
	right skip=0pt,
	left=25pt,
	right=0pt,
	top=3pt,
	bottom=3pt,
	arc=5pt,
	leftrule=0pt,
	rightrule=0pt,
	bottomrule=2pt,
	toprule=2pt,
	colback=bg,
	colframe=orange!70,
	enhanced,
	overlay={%
		\begin{tcbclipinterior}
			\fill[orange!20!white] (frame.south west) rectangle ([xshift=20pt]frame.north west);
	\end{tcbclipinterior}},
	#3,
}
\lstset{
	language=C,
	basicstyle=\ttfamily\small,
	keywordstyle=\color{blue},
	stringstyle=\color{orange},
	commentstyle=\color{green!60!black},
	numbers=left,
	numberstyle=\tiny\color{gray},
	breaklines=true,
	showstringspaces=false,
}
%------------------------------------------------------------
%This block of code defines the information to appear in the
%Title page
\title %optional
{5.5.4}
%\subtitle{A short story}

\author % (optional)
{RAVULA SHASHANK REDDY - EE25BTECH11047}

 \begin{document}
	
	
	\frame{\titlepage}
	\begin{frame}{Question}
    Find the value of $k$ for which the matrix is singular.
\begin{align*}
\myvec{k & 8 \\ 1 & 2k}
\end{align*}

\end{frame}
\begin{frame}{Solution}
    Singular matrix:
\begin{align}
\det\myvec{k & 8 \\ 1 & 2k} &= 0 \\
k \cdot 2k - 1 \cdot 8 &= 0\\
2k^2 - 8 &= 0 \\
2k^2 &= 8 \\
k^2 &= 4 
\end{align}
\begin{align}
\boxed{
k = \pm 2}
\end{align}

\end{frame}
\begin{frame}[fragile]
    \frametitle{C Code}
    \begin{lstlisting}
        #include <stdio.h>
#include <math.h>

int main() {
    double A[2][2];
    double a, b, c; // coefficients for quadratic
    double D, k1, k2;

    // Input matrix
    printf("Enter the 2x2 matrix elements:\n");
    for(int i=0; i<2; i++) {
        for(int j=0; j<2; j++) {
            scanf("%lf", &A[i][j]);
        }
    }

    // Expecting matrix of form [[k, 8], [1, 2k]]
    // General quadratic from determinant:
    \end{lstlisting}
    \end{frame}
\begin{frame}[fragile]
    \frametitle{C Code}
    \begin{lstlisting}
    // det = A[0][0]*A[1][1] - A[0][1]*A[1][0]
    // => k*(2k) - 8*1 = 2k^2 - 8 = 0

    a = 2;
    b = 0;
    c = -8;

    // Discriminant
    D = b*b - 4*a*c;

    if (D < 0) {
        printf("No real values of k\n");
    }
     \end{lstlisting}
    \end{frame}
\begin{frame}[fragile]
    \frametitle{C Code}
    \begin{lstlisting}else {
        k1 = (-b + sqrt(D)) / (2*a);
        k2 = (-b - sqrt(D)) / (2*a);

        printf("Equation: 2k^2 - 8 = 0\n");
        printf("Values of k for which matrix is singular:\n");
        printf("k = %.2f\n", k1);
        printf("k = %.2f\n", k2);
    }

    return 0;
}

    \end{lstlisting}
\end{frame}
\begin{frame}[fragile]
    \frametitle{Python Direct}
    \begin{lstlisting}
        import numpy as np
from libs.matrix.funcs import det   # your custom determinant function

# Define matrix with k
def det_val(k):
    A = np.array([[k, 8],
                  [1, 2*k]], dtype=float)
    return det(A)

solutions = []
for k in range(-10, 11):  # checking a range
    if abs(det_val(k)) < 1e-9:
        solutions.append(k)

print("Values of k for which matrix is singular:", solutions)

    \end{lstlisting}
\end{frame}
\begin{frame}[fragile]
    \frametitle{Python Shared}
    \begin{lstlisting}
        import ctypes

# Load shared library
lib = ctypes.CDLL("./libmatrix.so")

# Define argument and return types
lib.find_k.argtypes = [ctypes.POINTER(ctypes.c_double), ctypes.POINTER(ctypes.c_double)]
lib.find_k.restype = ctypes.c_int

# Prepare variables
k1 = ctypes.c_double()
k2 = ctypes.c_double()
  \end{lstlisting}
\end{frame}
\begin{frame}[fragile]
    \frametitle{Python Shared}
    \begin{lstlisting}
# Call function
n = lib.find_k(ctypes.byref(k1), ctypes.byref(k2))

# Print results
if n == 0:
    print("No real values of k")
elif n == 2:
    print("Values of k for which matrix is singular:")
    print("k =", k1.value)
    print("k =", k2.value)

    \end{lstlisting}
\end{frame}
\end{document}
